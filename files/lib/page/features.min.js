function Show(n){function f(n){var i,e,f,t;for(e="conceal",f=[],i=1;i<=n.object.getNumChildren();i++)(t=n.object[e+i.toString()],t)&&(f.push(t),t.visible=!1);for(t=n.object[e],t&&(f.push(t),t.visible=!1),r.push(f),e="featured",f=[],i=1;i<=n.object.getNumChildren();i++)(t=n.object[e+i.toString()],t)&&(f.push(t),t.visible=!1);t=n.object[e];t&&(f.push(t),t.visible=!1);u.push(f)}function e(n){t=r[n].slice(0);$.each(t,function(n,t){t.visible=!0});i=u[n].slice(0);$.each(i,function(n,t){t.visible=!1});window.update=!0}function o(){$.each(t,function(n,t){t.visible=!1});t=undefined;$.each(i,function(n,t){t.visible=!0});i=undefined}n=n||{};var r=[],u=[],t,i;this.baseSetting=function(n){f(n)};this.open=function(n){e(n)};this.close=function(n){o(n)}}function Solutions(n){function b(){}function k(n){var r,e,t,i;for(e="ra",t=[],r=1;r<=n.object.getNumChildren();r++)(i=n.object[e+r.toString()],i)&&(t.push(i),u(i),i.visible=!1);n.info&&(n.info.solutions==="conceal"?$.each(t,function(n,t){u(t);t.visible=!1}):n.info.solutions==="featured"&&$.each(t,function(n,t){s(t);t.visible=!0}));f.push(t)}function d(n){(c&&n===0&&f[n].length===0&&$.each(f,function(t,i){t>n&&window.steps[t].info.solutions!="conceal"&&(f[n]=f[n].concat(i.slice(0)))}),f[n].length!==0)&&(t=f[n].slice(0),$(i).show(),$(r).show(),$(e).show(),$(o).show(),steps[n].info&&(steps[n].info.solutions==="conceal"||steps[n].info.solutions==="featured"&&$.each(t,function(n,t){u(t)})),$.each(t,function(t,i){i.visible?s(i):u(i);i.visible=!0;a&&(!c||n>0)&&(i.cursor="pointer",i.addEventListener("click",y))}),l(),v==!0&&(window.onkeydown=nt))}function g(n){t&&(steps[n].info&&(steps[n].info.solutions==="conceal"?$.each(t,function(n,t){u(t)}):steps[n].info.solutions==="featured"&&$.each(t,function(n,t){s(t)})),$.each(t,function(t,i){i.visible=h(i)?!0:!1;a&&(!c||n>0)&&(i.cursor=null,i.removeEventListener("click",y))}),l(),$(i).hide(),$(r).hide(),$(e).hide(),$(o).hide(),t=undefined,v==!0&&(window.onkeydown=null))}function l(n){var c,f;if(n){if($(n.currentTarget).hasClass("disabled"))return;switch(n.currentTarget){case i:for(f=t.length-1;!h(t[f]);)f--;u(t[f]);break;case r:for(f=0;h(t[f]);)f++;s(t[f]);break;case e:for(c=0;c<t.length;c++)s(t[c]);break;case o:for(c=0;c<t.length;c++)u(t[c])}}else w==!1&&$.each(t,function(n,t){u(t)});f=0;$.each(t,function(n,t){h(t)&&f++});$(i).removeClass("disabled");$(r).removeClass("disabled");$(e).show();$(o).show();f===0&&$(i).addClass("disabled");f===t.length&&$(r).addClass("disabled");f===t.length?$(e).hide():$(o).hide();window.update=!0}function nt(n){var f,c,l=n.keyCode?n.keyCode:n.which;if(l==39||l==40?c=r:(l==37||l==38)&&(c=i),!$(c).hasClass("disabled")){switch(c){case i:for(f=t.length-1;!h(t[f]);)f--;u(t[f]);break;case r:for(f=0;h(t[f]);)f++;s(t[f])}f=0;$.each(t,function(n,t){h(t)&&f++});$(i).removeClass("disabled");$(r).removeClass("disabled");$(e).show();$(o).show();f===0&&$(i).addClass("disabled");f===t.length&&$(r).addClass("disabled");f===t.length?$(e).hide():$(o).hide();window.update=!0}}function s(n){var t,i;for(p(n),n.alpha=1,n.getChildAt(0).visible=!1,t=1;t<n.getNumChildren();t++)i=n.getChildAt(t),i.visible=!0}function u(n){var t,i;for(p(n),n.alpha=.01,n.getChildAt(0).visible=!0,t=1;t<n.getNumChildren();t++)i=n.getChildAt(t),i.visible=!1}function h(n){return n.alpha===1}function y(n){if(window.touch!==!0){var t=n.currentTarget;s(t);l()}}function p(n){var i,r,e;if(n.getChildByName("click_background")==null){for(i=new createjs.Graphics,r=0;r<n.getNumChildren();r++){var t=n.getChildAt(r),u=0,f=0;typeof t.virtualBounds!="undefined"?(t.x-=t.regX,t.regX=0,t.y-=t.regY,t.regY=0,u=t.virtualBounds.width,f=t.virtualBounds.height):typeof t.getMeasuredWidth=="function"&&(u=t.getMeasuredWidth(),f=t.getMeasuredHeight());i.beginFill("rgba(255,255,255,1)");i.drawRect(t.x,t.y,u,f);i.endFill()}e=new createjs.Shape(i);n.addChildAt(e,0);e.name="click_background"}}n=n||{};var f=[],t,i,r,e,o,w=n.featured==undefined?!0:n.featured,c=n.all==undefined?!1:n.all,a=n.click==undefined?!1:n.click,v=n.key==undefined?!1:n.key;b();this.baseSetting=function(n){k(n)};this.open=function(n){d(n)};this.close=function(n){g(n)}}function Result(n){function e(){t=document.createElement("a");$(t).text(mathviewer.getTranslation("Print"));$(t).addClass("button");$(t).on("click",c);new NoClickDelay(t);$("#buttons").append(t);$(t).hide()}function o(){}function s(){r&&$(t).show()}function h(){r&&$(t).hide()}function c(){var e;$("#container").css("visibility","hidden");var t,r={width:0,height:0},o=1e3,n="";u==="horizontal"?(r={width:842*i,height:595*i},t="output_A4_horizontal.css"):(r={width:595*i,height:842*i},t="output_A4_topright.css");window.updateProperties(r);bowser&&(bowser.msie&&bowser.version<=9?n="ie9":bowser.chrome?n="chrome":bowser.opera&&(n="opera"));e=!1;$.each(window.steps,function(n,t){t.frame&&(e=t.frame.visible,t.frame.visible=!1)});setTimeout(function(){var i=window.open("","pop_up","scrollbars=no,menubar=no,width=700,height=500,resizable=no,toolbar=no,location=no,status=no"),r=canvas.toDataURL();setTimeout(function(){i.document.write("<html class='"+n+"'><head><title>"+f+"<\/title><link rel='stylesheet' type='text/css' href='../../lib/page/Result/"+t+"'><\/head><body onload='print(); close();'><img class='kuva' src="+r+"><\/body><\/html>");i.document.close();i.focus()},o);window.updateProperties();$.each(window.steps,function(n,t){t.frame&&(t.frame.visible=e)});$("#container").css("visibility","visible")},100)}n=n||{};var t,r=n.inUse==undefined?!1:n.inUse,u=n.position==undefined?"topright":n.position,f=n.title==undefined?"Output":n.title,i=n.factor==undefined?4:n.factor;e();this.baseSetting=function(n){o(n)};this.open=function(n){s(n)};this.close=function(n){h(n)}}function Answers(n){function s(){t=document.createElement("a");$(t).text(mathviewer.getTranslation("Show the answers"));$(t).addClass("button");$(t).on("click",f);new NoClickDelay(t);$("#buttons").append(t);$(t).hide()}function h(n){var t,f,r,i;for(f="va",r=[],t=1;t<=n.object.getNumChildren();t++)(i=n.object[f+t.toString()],i)&&(r.push(i),i.visible=!1);u.push(r)}function c(n){u[n].length!==0&&(i=u[n].slice(0),i[0].parent.answers===undefined?(r.view=e.view.split("|")[i.length>1?1:0],r.hide=e.hide.split("|")[i.length>1?1:0]):(r.view=i[0].parent.answers.view,r.hide=i[0].parent.answers.hide),$(t).show(),f())}function l(){i&&($(t).hide(),f(),i=undefined)}function f(n){var u,f;if(n){if($(n.currentTarget).hasClass("buttonDisabled"))return;f=$(n.currentTarget).text();f===r.view?u=!0:f===r.hide&&(u=!1)}else o==!1?u=!1:(u=!1,$.each(i,function(n,t){if(t.visible==!0)return u=!0,!1}));u==!0?$(t).text(mathviewer.getTranslation(r.hide)):$(t).text(mathviewer.getTranslation(r.view));$.each(i,function(n,t){t.visible=u});window.update=!0}n=n||{};var e={view:"Show answer|Show answers",hide:"Hide the answer|Hide answers"},r={},u=[],i,t,o=n.featured==undefined?!0:n.featured;s();this.baseSetting=function(n){h(n)};this.open=function(n){c(n)};this.close=function(n){l(n)}}