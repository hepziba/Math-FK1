function createjs_fontfix(n){function e(n){var t=[];$.each(n,function(n,i){i==null||i==undefined||(i.getNumChildren&&n!="parent"?e(i):i.font&&(t.push(c(i)),l(t[t.length-1]),v(t[t.length-1])))});r?n.fontfix===!0&&o(t):o(t);y(t)}function c(n){var t,u,f,e,i,r;return t=n.font.split("px "),t=t[0].split(" ").concat(t[1]),t.length==2&&t.splice(0,0,""),u=t[0],f=parseFloat(t[1].replace("px","")),e=t[2],i=!1,n.text.indexOf("<u>")>-1&&(i=!0,n.text=n.text.replace("<u>","")),r=n.getTransformedBounds(),{item:n,x:n.x,y:n.y,width:r.width,height:r.height,scaleX:n.scaleX,scaleY:n.scaleX,text:n.text,style:u,size:f,font:e,underline:i}}function l(n){var e,r,o,u,s;e=n.size;r=n.font;u=0;t[r]&&(u=t[r]);isNaN(e)||isNaN(u)||(n.y=n.item.y+=u*e);f&&(n.x=n.item.x+=f);s=1;i[r]&&(s=i[r]);n.scaleX*=s;n.item.scaleX*=n.scaleX;o=n.item.getTransformedBounds();n.width=o.width;n.height=o.height}function v(n){var i,u,f,t,r;i=n.style;u=n.size;f=n.font;t=h[f];r=i+" ";t&&(t.indexOf("|bold")>-1&&(t=t.replace("|bold",""),i.indexOf("bold")===-1&&(r+="bold ")),t.indexOf("|italic")>-1&&(t=t.replace("|italic",""),i.indexOf("italic")===-1&&(r+="italic ")),n.item.font=r+u+"px "+t,properties=n.item.getTransformedBounds(),n.width=properties.width,n.height=properties.height)}function o(n){function v(n){var i=undefined,u=undefined,r,t;window.debugJS===!0&&(r=!1,t="");$.each(n,function(n,f){i==undefined?i=f.x:null;u==undefined?u=f.y:null;f.item.x=f.x=i;f.item.y=f.y=u;i=f.x+f.width;window.debugJS===!0&&(" .,!?)-".indexOf(f.text.charAt(0))==-1&&r&&(t=t==""?f.text:t+"<br>"+f.text,f.item.color="#ff0000"),r=f.text.charAt(f.text.length-1)!=" "?!0:!1)});window.debugJS===!0&&t!=""&&trace(t+"<br>")}function y(){var r=arguments,s=r[0],f,e,u,o,n,t,i;return typeof arguments[arguments.length-1]=="boolean"?(f=arguments[arguments.length-1],e=arguments.length-1):(f=!1,e=arguments.length),s.sort(function(s,h){for(i=1;i<e;i++)if(u=r[i],typeof u!="string"?(o=u[1],u=u[0],n=s[r[i][0]],t=h[r[i][0]]):(o=!1,n=s[r[i]],t=h[r[i]]),f===!1&&typeof n=="string"&&(n=n.toLowerCase(),t=t.toLowerCase()),o){if(n>t)return-1;if(n<t)return 1}else{if(n<t)return-1;if(n>t)return 1}return 0})}var p,w,f,h,c,b,k,i,d,l;if(n.length!=0){p=" ";w=".,?!>–•";y(n,"y");n.reverse();var o=n[0].y,e=[],t=0;for(e[t]=[],f=0;f<n.length;f++)obj=n[f],o-u<=obj.y&&obj.y<=o+u?e[t].push(obj):(y(e[t],"x"),t++,e[t]=[],e[t].push(obj),o=obj.y);for(y(e[t],"x"),f=0;f<e.length;f++)if(t=e[f],h=t[0].x+t[0].width,i=[t[0]],d=t[0].contents,c=!1,t.length>1){for(a=1;a<t.length;a++)b=p.indexOf(t[a].item.text.charAt(0))>-1,k=w.indexOf(t[a-1].item.text.charAt(t[a-1].item.text.length-1))>-1,l=!k||b,r?l?i.push(t[a]):(v(i),i=[t[a]],c=!1):h+s>=t[a].x&&l?i.push(t[a]):(v(i),i=[t[a]],c=!1),h=t[a].x+t[a].width;i.length>0&&v(i)}}}function y(n){$.each(n,function(n,t){var f;if(t.underline){var r=t.item,e=t.size,u=1.5*e/15,i=new createjs.Graphics;i.setStrokeStyle(1);i.beginStroke(r.color==undefined?"#000":r.color);i.moveTo(t.x,t.y+t.height-u).lineTo(t.x+t.width,t.y+t.height-u);i.endStroke();f=new createjs.Shape(i);r.parent.addChildAt(f,0)}})}var r=!0,u=3,s=5,f=2,h={"'Myriad Pro'":"'myriad-pro', 'Myriad Pro'"},t={ie:{"'UusiTekstaus'":1.5/30,"'Myriad Pro'":2.5/30,"'Tavutus'":3.5/30,"'Arial'":4/30},firefox:{"'UusiTekstaus'":5.5/30,"'Myriad Pro'":9.5/30,"'Tavutus'":9/30,"'Arial'":9/30},chrome:{"'UusiTekstaus'":1/30,"'Myriad Pro'":2.5/30,"'Tavutus'":4/30,"'Arial'":5/30},opera:{"'UusiTekstaus'":1/30,"'Myriad Pro'":2.5/30,"'Tavutus'":4/30,"'Arial'":5/30},safari:{"'UusiTekstaus'":1/30,"'Myriad Pro'":3/30,"'Tavutus'":10/30,"'Arial'":3/30}},i={ie:{},firefox:{},chrome:{},opera:{},safari:{}};bowser?bowser.msie?(t=t.ie,i=i.ie):bowser.firefox?(t=t.firefox,i=i.firefox):bowser.safari||iosVersion!=undefined?(t=t.safari,i=i.safari):bowser.chrome?(t=t.chrome,i=i.chrome):bowser.opera?(t=t.opera,i=i.opera):(t={},i={}):(t={},i={});e(n)}