function addButtonGroup(){var n=document.createElement("div");$(n).attr("id","buttons");$("body").append(n);btn_navigate1=document.createElement("a");$(btn_navigate1).text("<");$(btn_navigate1).attr("title",mathviewer.getTranslation("Previous",defaultLanguage));$(btn_navigate1).addClass("btn navigation navigate_prev");$(btn_navigate1).on("click",navigation_functions);$("body").append(btn_navigate1);$(btn_navigate1).hide();btn_navigate2=document.createElement("a");$(btn_navigate2).text(">");$(btn_navigate2).attr("title",mathviewer.getTranslation("Next",defaultLanguage));$(btn_navigate2).addClass("btn navigation navigate_next");$(btn_navigate2).on("click",navigation_functions);$("body").append(btn_navigate2);$(btn_navigate2).hide();btn_spread=document.createElement("a");$(btn_spread).text(mathviewer.getTranslation("Return",defaultLanguage));$(btn_spread).addClass("button navigate_spread");$(btn_spread).on("click",navigation_functions);$("#buttons").append(btn_spread);$(btn_spread).hide()}function preRender(){this.lib==undefined?setTimeout(preRender,100):($("#container").css("visibility","hidden"),lib.properties!=undefined&&lib.properties.manifest.length===0&&(lib.properties.manifest=[{id:"temp",src:"https://majemastoragelive.blob.core.windows.net/math-test/Content/temp.jpg"}]),loadAssetsForIE9(),init(),postRender())}function postRender(){stage==null?setTimeout(postRender,100):(canvasFontAdjust(exportRoot),addStageEvents(),setTimeout(function(){$("#container").css("visibility","visible");loaded=!0;typeof window.parent.pageloaded!="undefined"&&window.parent.pageloaded()},250))}function addStageEvents(){var t,u,r,n;for(createjs.Ticker.removeEventListener("tick",stage),createjs.Touch.enable(stage),createjs.Ticker.addEventListener("tick",tick),stage.enableMouseOver(10),steps=[{object:exportRoot,x:0,y:0,width:stageProperties.width,height:stageProperties.height,scaling:1}],exportRoot.other&&exportRoot.other.pageBottomText&&(t=exportRoot.other.pageBottomText.x,exportRoot.other.pageBottomText.cursor="pointer",u=t>=440?77:t>=390?115:t>=380?120:t>=370?130:t>=360?140:t<320?180:130,exportRoot.other.pageBottomText.addEventListener("mouseover",function(){exportRoot.other.pageBottomText.font="16px 'Myriad Pro'";exportRoot.other.pageBottomText.pos=="right"&&(exportRoot.other.pageBottomText.x=exportRoot.other.pageBottomText.x-u);stage.update()}),exportRoot.other.pageBottomText.addEventListener("mouseout",function(){exportRoot.other.pageBottomText.font="9px 'Myriad Pro'";exportRoot.other.pageBottomText.pos=="right"&&(exportRoot.other.pageBottomText.x=exportRoot.other.pageBottomText.x+u);stage.update()})),r=1;r<=exportRoot.getNumChildren();r++)if(n=exportRoot["v"+r.toString()],n!==undefined){n.addEventListener("click",stepFunctions);n.addEventListener("rollover",stepRoll);n.addEventListener("rollout",stepRoll);n.cursor="pointer";n.x-=n.regX;n.y-=n.regY;n.regX=n.regY=0;var f={object:n,x:n.x,y:n.y,width:n.virtualBounds.width,height:n.virtualBounds.height,rotation:n.rotation,scaling:n.scaleX},i=(new createjs.Graphics).f("rgba(255,255,255,.01)").drawRoundRect(-5,-5,f.width+10,f.height+10,5),o=new createjs.Shape(i),e=new createjs.MovieClip;e.id="background";e.addChild(o);n.addChildAt(e,0);steps.push(f)}i=new createjs.Graphics;i.s("#999999").ss(1).rect(0,0,stageProperties.width,stageProperties.height);i.s("#999999").ss(1).moveTo(stageProperties.width/2,0);sideFrameMC=new createjs.Shape(i);sideFrameMC.x=sideFrameMC.y=0;stage.addChild(sideFrameMC);addButtonGroup();window.parent===this&&(window.addEventListener("orientationchange",updateProperties),window.onresize=updateProperties);updateProperties();stepsCount=0;step=steps[0];setSteps()}function hideNavigation(){$(btn_navigate1).hide();$(btn_navigate2).hide();$(btn_spread).hide()}function navigation_functions(n){switch(n.target){case btn_navigate1:closeStep();stepsCount--;break;case btn_navigate2:closeStep();stepsCount++;break;case btn_spread:closeStep(!0);stepsCount=0}setSteps()}function stepFunctions(n){if(!(stepsCount>0)){closeStep(!0);var t=n.currentTarget!=undefined?n.currentTarget:n.target!=undefined?n.target:n;$.each(steps,function(n,i){i.object===t&&(stepsCount=n)});setSteps();update=!0}}function stepRoll(n){if(!(stepsCount>0)){var t,i=n.currentTarget!=undefined?n.currentTarget:n.target!=undefined?n.target:n;$.each(steps,function(n,r){r.object===i&&(t=r,t=[t])});switch(n.type){case"rollover":$.each(t,function(n,t){t.object.scaleX=t.object.scaleY=t.scaling*(t.width+14)/t.width;t.object.x-=4;t.object.y-=2});break;case"rollout":$.each(t,function(n,t){t.object.scaleX=t.object.scaleY=t.scaling;t.object.x=t.x;t.object.y=t.y})}update=!0}}function setSteps(){var n,t;if(steps[stepsCount].object.visible=!0,stepsCount>0&&(steps[stepsCount].object.removeEventListener("click",stepFunctions),steps[stepsCount].object.cursor=null),stepsCount===0?hideNavigation():($(btn_navigate1).show(),$(btn_navigate2).show(),$(btn_spread).show(),stepsCount===1&&$(btn_navigate1).hide(),stepsCount===steps.length-1&&$(btn_navigate2).hide()),stepsCount>0){for(n=0;n<exportRoot.getNumChildren();n++)(t=exportRoot.getChildAt(n),t!==steps[stepsCount].object&&t.contains!==undefined)&&(t.visible=!1);steps[stepsCount].object.visible=!0}sideFrameMC.visible=sideFrameMC&&stepsCount===0?!0:sideFrameMC&&stepsCount>0?!1:sideFrameMC.visible;stageInfoBeforeStep||(stageInfoBeforeStep={x:stage.x,y:stage.y,scaling:stage.scaleX});updateProperties()}function closeStep(n){var t,i;if(hideNavigation(),stepsCount>0&&(steps[stepsCount].object.addEventListener("click",stepFunctions),steps[stepsCount].object.cursor="pointer"),n===!1){steps[stepsCount].object.visible=!1;return}for(t=0;t<exportRoot.getNumChildren();t++)(i=exportRoot.getChildAt(t),i.contains!==undefined)&&(i.visible=!0);updateProperties();n===!0&&stageInfoBeforeStep&&stageInfoBeforeStep.scaling==stageInfo.scaling&&setTimeout(function(){stage.x=stageInfoBeforeStep.x;stage.y=stageInfoBeforeStep.y;stage.scaleX=stage.scaleY=stageInfoBeforeStep.scaling;stageInfoBeforeStep=null;update=!0},0);update=!0}function updateStep2(n){if(stepsCount===0)n.object.scaleX=n.object.scaleY=n.scaling,n.object.x=n.x,n.object.y=n.y,n.object.rotation=n.rotation;else{var t={x:stageProperties.width/1.97,y:stageProperties.height/2},i=parseFloat($("#buttons").attr("scaling")||1);n.object.scaleX=n.object.scaleY=Math.min(3.5,Math.min((canvasProperties.width-110*i)/n.width,(canvasProperties.height-20*stage.scaleX-60*i)/n.height)/stage.scaleX);n.object.x=t.x-n.width*n.object.scaleX/2;n.object.y=Math.min(80,t.y-n.height*n.object.scaleY/2-20);n.frame&&(n.frame.visible=!1)}update=!0}function tick(n){frequentUpdate&&(update=!0);(update||createjs.Tween.hasActiveTweens())&&(update=!1,stage.update(n))}function updateProperties(){var t,n;if(canvas==undefined||stage==undefined){setTimeout(updateProperties,100);return}if(canvasProperties={width:window.innerWidth?window.innerWidth:$(window).width(),height:window.innerHeight?window.innerHeight:$(window).height()},t=canvas.getContext("2d"),stageInfo.ratio=mathviewer.getPixelRatio(t),canvasProperties.width*=stageInfo.ratio,canvasProperties.height*=stageInfo.ratio,canvas.width=canvasProperties.width,canvas.height=canvasProperties.height,canvas.style.width=canvasProperties.width/stageInfo.ratio+"px",canvas.style.height=canvasProperties.height/stageInfo.ratio+"px",canvasProperties.width>canvasProperties.height||stepsCount>0?(position!="horizontal"&&stepsCount===0&&(stageInfoBeforeStep=null),stepsCount===0&&(position="horizontal"),stageInfo.scaling=Math.min(canvasProperties.width/stageProperties.width,canvasProperties.height/stageProperties.height),stageInfo.x=(canvasProperties.width-stageProperties.width*stageInfo.scaling)/2,stageInfo.y=(canvasProperties.height-stageProperties.height*stageInfo.scaling)/2):(position!="topright"&&stepsCount===0&&(stageInfoBeforeStep=null),stepsCount===0&&(position="topright"),stageInfo.scaling=Math.min(canvasProperties.width/(stageProperties.width/2),canvasProperties.height/stageProperties.height),pageCount==null&&(pageCount=1),pageCount==1?(stageInfo.x=0,stageInfo.y=(canvasProperties.height-stageProperties.height*stageInfo.scaling)/2):(stageInfo.x=canvasProperties.width-stageProperties.width*stageInfo.scaling,stageInfo.y=(canvasProperties.height-stageProperties.height*stageInfo.scaling)/2)),stage.x=stageInfo.x,stage.y=stageInfo.y,stage.scaleX=stage.scaleY=stageInfo.scaling,n=canvasProperties.height/580,n=navigator.userAgent.match(/iPad/i)!=null?.98276:n,$("#buttons").attr("scaling",n),$("#buttons").css({"font-size":15*n+"px"}),$(".navigation").css({"font-size":20*n+"px"}),$("a.button").css({"font-size":15*n+"px"}),$("a.btn").css({"font-size":20*n+"px"}),steps)for(a=1;a<steps.length;a++)updateStep2(steps[a]);update=!0}var frequentUpdate=!0,loaded,canvasProperties,update,pageCount,position,stageInfoBeforeStep,sideFrameMC,steps,stepsCount,btn_navigate1,btn_navigate2,btn_spread,stageProperties,stageInfo;$(document).ready(preRender);stageProperties={width:610,height:678};setTimeout(function(){frequentUpdate=!1},6e4);stageInfo={x:0,y:0,scaling:1,ratio:1};