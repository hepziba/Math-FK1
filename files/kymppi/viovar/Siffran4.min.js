function init(){canvas=document.getElementById("canvas");images=images||{};var n=new createjs.LoadQueue(!0,null,!0);n.addEventListener("fileload",function(n){n.item.type=="image"&&(images[n.item.id]=n.result)});n.addEventListener("complete",handleComplete);n.loadManifest(lib.properties.manifest)}function handleComplete(){addEnterKeyEvent();exportRoot=new lib.exercise;exportRoot.isExercise=!0;exportRoot.isBatExercise=!0;exportRoot.isCheckAnswerEnabled=!1;exportRoot.isNewExerciseEnabled=!1;exportRoot.isAnswersAvailable=!0;stage=new createjs.Stage(canvas);stage.addChild(exportRoot);stage.update();createjs.Ticker.setFPS(lib.properties.fps)}var canvas,stage,exportRoot,extras=function(){},lib,images,createjs;(function(n,t,i){function rt(n,t,r){var b=h,l,a,c;if(k&&(t.x=o,t.y=s,t.oldx=o,t.oldy=s,k=!1),t.x==v&&t.y==y&&(h=2,t.x=o,t.y=s,t.oldx=o,t.oldy=s,k=!0),t.x==p&&t.y==w&&(h=1,t.oldx=u,t.oldy=f,t.x=u,t.y=f),b==h){if(t.x===u&&t.y===f&&(t.oldx=u,t.oldy=f,t.x=u,t.y=f),t.x===u&&t.y===f||t.x===p&&t.y===w){for(l=0;l<n.tempElements.length;l++)a=n.tempElements[l],a&&(a.object.visible=!1,n.removeChild(a.object));n.tempElements=[]}c=new i.Shape;c.graphics.setStrokeStyle(10,"round","round").beginStroke("#000").curveTo(t.oldx,t.oldy,t.x,t.y).endStroke();c.visible=r;t.oldx=t.x;t.oldy=t.y;t.x===v&&t.y===y?(t.x=o,t.y=s,t.oldx=t.x,t.oldy=t.y):n.addChild(c);n.pencil.x=t.x;n.pencil.y=t.y-145;n.removeChild(n.pencil);n.addChild(n.pencil);et=this.pencil;t.x===u&&t.y===f?e.shape.visible=!0:t.x===863.74688564698238&&t.y===174.69199999999998?e.shape.visible=!1:t.x==935.88662880886432&&t.y==348.15519390581721&&n.removeChild(n.pencil);n.tempElements.push({object:c,expired:!1})}return t}function ut(){e.pause1.visible=!1;e.play1.visible=!0;e.paused=!0;vt(thisStage)}function nt(){e.removeChild(e.endCharacter);e.pause2.visible=!1;e.play2.visible=!0;e.paused=!0;e.movie.stop()}function lt(n){var t,i;for(n.removeChild(n.endCharacter),n.play2.visible=!1,n.pause2.visible=!0,n.paused=!1,n.movie.gotoAndStop("start"),t=0;t<n.movie.tempElements.length;t++)i=n.movie.tempElements[t],i&&(i.object.visible=!1,n.movie.removeChild(i.object));n.movie.tempElements=[];n.movie.gotoAndPlay("start");h=1}function at(n){n.bird1.alpha=0;n.bird2.alpha=0;n.bird3.alpha=0;n.bird4.alpha=0;i.Tween.get(n.bird1).wait(1e3).to({alpha:1},500).call(function(){i.Tween.get(n.bird2).wait(1500).to({alpha:1},500).call(function(){i.Tween.get(n.bird3).wait(1500).to({alpha:1},500).call(function(){i.Tween.get(n.bird4).wait(1500).to({alpha:1},500).call(function(){e.pause1.visible=!1;e.play1.visible=!0})})})})}function vt(){i.Tween.removeAllTweens()}var r,ft,h,k,e;n.properties={width:1219,height:678,fps:20,color:"#FFFFFF",isExercise:!0,manifest:[{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/pencil.png",id:"pen"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/player-buttons.png",id:"icons"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/limb.png",id:"limb"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/s4_bird1.png",id:"bird1"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/s4_bird2.png",id:"bird2"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/s4_bird3.png",id:"bird3"},{src:"https://majemastoragetest.blob.core.windows.net/math-test/FK1/files/kymppi/viovar/images/s4_bird4.png",id:"bird4"}]};n.init_Magic_Wand();ft={x:1230,y:210,scaleX:.5,scaleY:.5,wrongX:900,wrongY:330};(n.pen=function(){this.initialize(t.pen)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.icons=function(){this.initialize(t.icons)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.limb=function(){this.initialize(t.limb)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.bird1=function(){this.initialize(t.bird1)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.bird2=function(){this.initialize(t.bird2)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.bird3=function(){this.initialize(t.bird3)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.bird4=function(){this.initialize(t.bird4)}).prototype=r=new i.Bitmap;r.virtualBounds=new i.Rectangle(0,0,121,121);(n.Basement=function(){this.initialize();this.header=new n.exerciseTitle;this.header.setTransform(0,-30,1,1,0,0,0,0,0);this.addChild(this.header)}).prototype=r=new i.Container;r.virtualBounds=new i.Rectangle(0,0,610.9,650);var c=transformY=.181,l=820,a=6,u=168*c+l,f=0*transformY+a,v=976*c+l+10,y=932*transformY+a,o=864*c+l,s=0*transformY+a,p=628*c+l,w=1900*transformY+a+17,yt=u,pt=f,wt=v,bt=y,d={x:u,y:f,oldx:u,oldy:f},g={x:o,y:s,oldx:o,oldy:s},et=null,ot=[new createjs.Point(u,f),new createjs.Point(44*c+l,932*transformY+4+a),new createjs.Point(48*c+l,932*transformY+a),new createjs.Point(v,y)],st=[new createjs.Point(o,s),new createjs.Point(p,w)],ht=[new createjs.Point(u,f),new createjs.Point(48*c+l,932*transformY+a),new createjs.Point(v-18,y)],ct=[new createjs.Point(o,s),new createjs.Point(p,w)],b=[],tt=getMotionPathFromPoints(ot),it=getMotionPathFromPoints(st);[].push(tt,it);b.push(getMotionPathFromPoints(ht),getMotionPathFromPoints(ct));(n.EndCharacter=function(){var o,t,n,r,e;for(this.initialize(),thisStage=this,o={x:u,y:f,oldx:u,oldy:f},t=0;t<b.length;t++)for(n=2;n<b[t].length;n+=2)r=b[t],e=new i.Shape,e.graphics.setStrokeStyle(10,"round","round").beginStroke("#000").curveTo(r[n-2],r[n-1],r[n],r[n+1]).endStroke(),thisStage.addChild(e)}).prototype=r=new i.Container;r.virtualBounds=new i.Rectangle(0,0,610.9,650);h=1;(n.drawPoints=function(t,r,u){this.initialize(t,r,u,{start:0,end:1},!0);thisStage=this;thisStage.pencil=new n.pen;thisStage.pencil.regY=0;thisStage.pencil.setTransform(0,0,.8,.8);thisStage.tempElements=[];thisStage.addChild(thisStage.pencil);this.timeline.addTween(i.Tween.get(d).wait(10).to({guide:{path:tt}},20)).on("change",function(n){h==1&&(d=rt(thisStage,d,!0,n))});this.timeline.addTween(i.Tween.get(g).wait(40).to({guide:{path:it}},20).call(function(){LastStage=!0;nt()}).wait(50)).on("change",function(n){h==2&&(g=rt(thisStage,g,!0,n))})}).prototype=r=new i.MovieClip;r.nominalBounds=new i.Rectangle(-126.9,130,123,123);k=!1;(n.Stage1=function(){var r,o,s,h;this.initialize();r=this;e=this;r.buttonShadow=new i.Shadow("#000000",0,0,2);r.rectangle1=new createjs.Shape;r.rectangle1.graphics.f("").s("#00B4EA").ss(1.5).drawRoundRect(0,0,425,68*5.2,15);r.rectangle1.setTransform(240,0);r.rectangle2=new createjs.Shape;r.rectangle2.graphics.f("").s("#00B4EA").ss(1.5).drawRoundRect(0,0,425,68*5.2,15);r.rectangle2.setTransform(730,0);r.limb=new n.limb;r.limb.setTransform(260,200);r.bird1=new n.bird1;r.bird1.setTransform(275,124);r.bird1.alpha=0;r.bird2=new n.bird2;r.bird2.setTransform(340,129);r.bird2.alpha=0;r.bird3=new n.bird3;r.bird3.setTransform(380,143);r.bird3.alpha=0;r.bird4=new n.bird4;r.bird4.setTransform(510,60);r.bird4.alpha=0;r.shape=new createjs.Shape;r.shape.graphics.beginFill("#ff00ff").drawCircle(u,f,15);r.circleShadow=new i.Shadow("#ff0000",0,0,5);r.shape.shadow=r.circleShadow;r.circleShadow.blur=0;createjs.Tween.get(r.circleShadow).to({blur:50},500).wait(100).to({blur:0},500).to({blur:50},500).wait(10).to({blur:5},500);o={images:[t.icons],frames:{width:39,height:40},animations:{trash:0,male:1,wait:2,library:3,female:4,hanger:5,stairs:6,noparking:7}};s=new createjs.SpriteSheet(o);r.pause1=new createjs.Sprite(s);r.pause1.gotoAndStop(1);r.pause1.setTransform(0,0,2,1.25);r.pause1.x=402;r.pause1.y=68*3.2+5+145;r.pause1.shadow=r.buttonShadow.clone();r.play1=r.pause1.clone();r.play1.gotoAndStop(3);r.play1.x=402;r.play1.y=68*3.2+5+145;r.play1.visible=!1;r.play1.shadow=r.buttonShadow.clone();r.pause2=r.pause1.clone();r.pause2.gotoAndStop(1);r.pause2.x=902;r.pause2.y=68*3.2+5+145;r.pause2.shadow=r.buttonShadow.clone();r.play2=r.pause1.clone();r.play2.gotoAndStop(3);r.play2.x=902;r.play2.y=68*3.2+5+145;r.play2.visible=!1;r.play2.shadow=r.buttonShadow.clone();h={x:u,y:f,oldx:u,oldy:f};r.tempElements=[];this.addChild(this.rectangle1,this.rectangle2,this.limb,this.bird1,this.bird2,this.bird3,this.bird4,r.shape,r.previousRect,r.previousText,r.pause1,r.play1,r.pause2,r.play2);this.endCharacter=new n.EndCharacter;r.movie=new n.drawPoints;r.movie.setTransform(0,0);this.addChild(r.movie);createjs.Tween.get(h).setPaused(!1);r.paused=!1;r.pause1.addEventListener("click",function(){ut()});r.play1.addEventListener("click",function(){r.play1.visible=!1;r.pause1.visible=!0;r.paused=!1;at(r)});r.pause2.addEventListener("click",function(){nt()});r.play2.addEventListener("click",function(){r.currentSpeed=40;createjs.Ticker.setFPS(r.currentSpeed*n.properties.fps/100);lt(r)});ut();nt()}).prototype=r=new i.Container;r.virtualBounds=new i.Rectangle(0,0,610.9,650);(n.exerciseTitle=function(){this.initialize();this.text=new i.Text("Siffran 4","bold 24px 'Myriad Pro'","#0B95D4");this.text.setTransform(96.5,22);this.text_1=new i.Text("14","bold 28px 'Myriad Pro'","#FFFFFF");this.text_1.setTransform(50,22);this.shape=new i.Shape;this.shape.graphics.f("#0B95D4").s().p("AmyDqIAAnTINlAAIAAGbQAAAjgcAOIgcAHg");this.shape.setTransform(43.6,9.5);this.addChild(this.shape,this.text_1,this.text)}).prototype=r=new i.Container;r.virtualBounds=new i.Rectangle(0,0,610.9,650);(n.exercise=function(){this.initialize();this.other=new n.Basement;this.other.setTransform(0,40,1,1);this.stage1=new n.Stage1;this.stage1.visible=!0;this.stage1.setTransform(100,100,1,1,0,0,0);this.addChild(this.other,this.stage1)}).prototype=r=new i.Container;r.virtualBounds=new i.Rectangle(0,0,610.9,677.5)})(lib=lib||{},images=images||{},createjs=createjs||{});